version: "2"

services:
  jenkins:
    image: localhost:5000/timw/jenkins
    entrypoint:
      - /usr/share/jenkins/rancher/jenkins.sh
    volumes:
      - jenkins-data:/var/jenkins_home
    environment:
      LIBPROCESS_PORT: 9400
      LIBPROCESS_ADVERTISE_PORT: 9400
      LIBPROCESS_ADVERTISE_IP: 192.168.1.117
    labels:
      io.rancher.container.hostname_override: container_name
      io.rancher.container.pull_image: always

volumes:
  jenkins-data:
    driver: rancher-nfs
    external: true